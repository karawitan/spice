<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>D-Bus: keyring class</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">D-Bus<span id="projectnumber">&#160;1.12.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">keyring class <div class="ingroups"><a class="el" href="group__DBusInternals.html">D-Bus secret internal implementation details</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="structDBusKeyring.html" title="Internals of DBusKeyring.">DBusKeyring</a> data structure.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9ef32242338798399ef2eaacea5812a6" id="r_ga9ef32242338798399ef2eaacea5812a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9ef32242338798399ef2eaacea5812a6">_dbus_keyring_ref</a> (<a class="el" href="structDBusKeyring.html">DBusKeyring</a> *keyring)</td></tr>
<tr class="memdesc:ga9ef32242338798399ef2eaacea5812a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments reference count of the keyring.  <br /></td></tr>
<tr class="memitem:gadd42b029d08dc477b6847e91bdcb23ca" id="r_gadd42b029d08dc477b6847e91bdcb23ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadd42b029d08dc477b6847e91bdcb23ca">_dbus_keyring_unref</a> (<a class="el" href="structDBusKeyring.html">DBusKeyring</a> *keyring)</td></tr>
<tr class="memdesc:gadd42b029d08dc477b6847e91bdcb23ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrements refcount and finalizes if it reaches zero.  <br /></td></tr>
<tr class="memitem:ga69c7557fa1cc01b07ab17942b70531c6" id="r_ga69c7557fa1cc01b07ab17942b70531c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga69c7557fa1cc01b07ab17942b70531c6">_dbus_keyring_new_for_credentials</a> (<a class="el" href="structDBusCredentials.html">DBusCredentials</a> *credentials, const <a class="el" href="structDBusString.html">DBusString</a> *context, <a class="el" href="structDBusError.html">DBusError</a> *error)</td></tr>
<tr class="memdesc:ga69c7557fa1cc01b07ab17942b70531c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new keyring that lives in the ~/.dbus-keyrings directory of the user represented by <code class="param">credentials</code>.  <br /></td></tr>
<tr class="memitem:ga5bbeeef1ba831a89d7f0f211e886e7c2" id="r_ga5bbeeef1ba831a89d7f0f211e886e7c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5bbeeef1ba831a89d7f0f211e886e7c2">_dbus_keyring_validate_context</a> (const <a class="el" href="structDBusString.html">DBusString</a> *context)</td></tr>
<tr class="memdesc:ga5bbeeef1ba831a89d7f0f211e886e7c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the context is a valid context.  <br /></td></tr>
<tr class="memitem:ga0daf16cfb75ab28d67d5dfa881f457a6" id="r_ga0daf16cfb75ab28d67d5dfa881f457a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0daf16cfb75ab28d67d5dfa881f457a6">_dbus_keyring_get_best_key</a> (<a class="el" href="structDBusKeyring.html">DBusKeyring</a> *keyring, <a class="el" href="structDBusError.html">DBusError</a> *error)</td></tr>
<tr class="memdesc:ga0daf16cfb75ab28d67d5dfa881f457a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a recent key to use for authentication.  <br /></td></tr>
<tr class="memitem:ga5ef8c7224182f27ff56b3105c6963cfd" id="r_ga5ef8c7224182f27ff56b3105c6963cfd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5ef8c7224182f27ff56b3105c6963cfd">_dbus_keyring_is_for_credentials</a> (<a class="el" href="structDBusKeyring.html">DBusKeyring</a> *keyring, <a class="el" href="structDBusCredentials.html">DBusCredentials</a> *credentials)</td></tr>
<tr class="memdesc:ga5ef8c7224182f27ff56b3105c6963cfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the keyring is for the same user as the given credentials.  <br /></td></tr>
<tr class="memitem:ga6adfb998247ab4d0c1d5652f59c354e4" id="r_ga6adfb998247ab4d0c1d5652f59c354e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6adfb998247ab4d0c1d5652f59c354e4">_dbus_keyring_get_hex_key</a> (<a class="el" href="structDBusKeyring.html">DBusKeyring</a> *keyring, int key_id, <a class="el" href="structDBusString.html">DBusString</a> *hex_key)</td></tr>
<tr class="memdesc:ga6adfb998247ab4d0c1d5652f59c354e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the hex-encoded secret key for the given ID.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p><a class="el" href="structDBusKeyring.html" title="Internals of DBusKeyring.">DBusKeyring</a> data structure. </p>
<p>Types and functions related to <a class="el" href="structDBusKeyring.html" title="Internals of DBusKeyring.">DBusKeyring</a>. <a class="el" href="structDBusKeyring.html" title="Internals of DBusKeyring.">DBusKeyring</a> is intended to manage cookies used to authenticate clients to servers. This is essentially the "verify that client can read the user's homedir" authentication mechanism. Both client and server must have access to the homedir.</p>
<p>The secret keys are not kept in locked memory, and are written to a file in the user's homedir. However they are transient (only used by a single server instance for a fixed period of time, then discarded). Also, the keys are not sent over the wire.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo</a></b></dt><dd>there's a memory leak on some codepath in here, I saw it once when running make check - probably some specific initial cookies present in the cookie file, then depending on what we do with them. </dd></dl>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga0daf16cfb75ab28d67d5dfa881f457a6" name="ga0daf16cfb75ab28d67d5dfa881f457a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0daf16cfb75ab28d67d5dfa881f457a6">&#9670;&#160;</a></span>_dbus_keyring_get_best_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _dbus_keyring_get_best_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> *</td>          <td class="paramname"><span class="paramname"><em>keyring</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a recent key to use for authentication. </p>
<p>If no recent key exists, creates one. Returns the key ID. If a key can't be written to the keyring file so no recent key can be created, returns -1. All valid keys are &gt; 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyring</td><td>the keyring </td></tr>
    <tr><td class="paramname">error</td><td>error on failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>key ID to use for auth, or -1 on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-keyring_8c_source.html#l00945">945</a> of file <a class="el" href="dbus-keyring_8c_source.html">dbus-keyring.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-protocol_8h_source.html#l00355">DBUS_ERROR_FAILED</a>, <a class="el" href="dbus-errors_8c_source.html#l00243">dbus_set_error_const()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00094">DBusKey::id</a>, and <a class="el" href="dbus-macros_8h_source.html#l00039">TRUE</a>.</p>

</div>
</div>
<a id="ga6adfb998247ab4d0c1d5652f59c354e4" name="ga6adfb998247ab4d0c1d5652f59c354e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6adfb998247ab4d0c1d5652f59c354e4">&#9670;&#160;</a></span>_dbus_keyring_get_hex_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a> _dbus_keyring_get_hex_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> *</td>          <td class="paramname"><span class="paramname"><em>keyring</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>key_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusString.html">DBusString</a> *</td>          <td class="paramname"><span class="paramname"><em>hex_key</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the hex-encoded secret key for the given ID. </p>
<p>Returns <a class="el" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a> if not enough memory. Returns <a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a> but empty key on any other error such as unknown key ID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyring</td><td>the keyring </td></tr>
    <tr><td class="paramname">key_id</td><td>the key ID </td></tr>
    <tr><td class="paramname">hex_key</td><td>string to append hex-encoded key to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a> if we had enough memory </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-keyring_8c_source.html#l01003">1003</a> of file <a class="el" href="dbus-keyring_8c_source.html">dbus-keyring.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-string_8c_source.html#l02259">_dbus_string_hex_encode()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00117">DBusKeyring::keys</a>, <a class="el" href="dbus-keyring_8c_source.html#l00118">DBusKeyring::n_keys</a>, <a class="el" href="dbus-macros_8h_source.html#l00049">NULL</a>, <a class="el" href="dbus-keyring_8c_source.html#l00101">DBusKey::secret</a>, and <a class="el" href="dbus-macros_8h_source.html#l00039">TRUE</a>.</p>

</div>
</div>
<a id="ga5ef8c7224182f27ff56b3105c6963cfd" name="ga5ef8c7224182f27ff56b3105c6963cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5ef8c7224182f27ff56b3105c6963cfd">&#9670;&#160;</a></span>_dbus_keyring_is_for_credentials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a> _dbus_keyring_is_for_credentials </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> *</td>          <td class="paramname"><span class="paramname"><em>keyring</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusCredentials.html">DBusCredentials</a> *</td>          <td class="paramname"><span class="paramname"><em>credentials</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the keyring is for the same user as the given credentials. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyring</td><td>the keyring </td></tr>
    <tr><td class="paramname">credentials</td><td>the credentials to check</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a> if the keyring belongs to the given user </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-keyring_8c_source.html#l00984">984</a> of file <a class="el" href="dbus-keyring_8c_source.html">dbus-keyring.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-credentials_8c_source.html#l00552">_dbus_credentials_same_user()</a>, and <a class="el" href="dbus-keyring_8c_source.html#l00119">DBusKeyring::credentials</a>.</p>

</div>
</div>
<a id="ga69c7557fa1cc01b07ab17942b70531c6" name="ga69c7557fa1cc01b07ab17942b70531c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga69c7557fa1cc01b07ab17942b70531c6">&#9670;&#160;</a></span>_dbus_keyring_new_for_credentials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> * _dbus_keyring_new_for_credentials </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusCredentials.html">DBusCredentials</a> *</td>          <td class="paramname"><span class="paramname"><em>credentials</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structDBusString.html">DBusString</a> *</td>          <td class="paramname"><span class="paramname"><em>context</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new keyring that lives in the ~/.dbus-keyrings directory of the user represented by <code class="param">credentials</code>. </p>
<p>If the <code class="param">credentials</code> are <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> or empty, uses those of the current process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">credentials</td><td>a set of credentials representing a user or <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> </td></tr>
    <tr><td class="paramname">context</td><td>which keyring to get </td></tr>
    <tr><td class="paramname">error</td><td>return location for errors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the keyring or <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> on error </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-keyring_8c_source.html#l00705">705</a> of file <a class="el" href="dbus-keyring_8c_source.html">dbus-keyring.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-sysdeps-unix_8c_source.html#l04215">_dbus_append_keyring_directory_for_credentials()</a>, <a class="el" href="dbus-internals_8h_source.html#l00152">_dbus_assert</a>, <a class="el" href="dbus-sysdeps-unix_8c_source.html#l04443">_dbus_check_setuid()</a>, <a class="el" href="dbus-sysdeps-unix_8c_source.html#l03020">_dbus_concat_dir_and_file()</a>, <a class="el" href="dbus-sysdeps-unix_8c_source.html#l02622">_dbus_credentials_add_from_current_process()</a>, <a class="el" href="dbus-credentials_8c_source.html#l00408">_dbus_credentials_are_anonymous()</a>, <a class="el" href="dbus-credentials_8c_source.html#l00523">_dbus_credentials_copy()</a>, <a class="el" href="dbus-credentials_8c_source.html#l00095">_dbus_credentials_new_from_current_process()</a>, <a class="el" href="dbus-credentials_8c_source.html#l00130">_dbus_credentials_unref()</a>, <a class="el" href="dbus-sysdeps-unix_8c_source.html#l02957">_dbus_ensure_directory()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00677">_dbus_keyring_unref()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00849">_dbus_keyring_validate_context()</a>, <a class="el" href="dbus-string_8c_source.html#l00935">_dbus_string_append()</a>, <a class="el" href="dbus-string_8c_source.html#l01283">_dbus_string_copy()</a>, <a class="el" href="dbus-string_8c_source.html#l00259">_dbus_string_free()</a>, <a class="el" href="dbus-string_8c_source.html#l00175">_dbus_string_init()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00119">DBusKeyring::credentials</a>, <a class="el" href="dbus-protocol_8h_source.html#l00355">DBUS_ERROR_FAILED</a>, <a class="el" href="dbus-errors_8c_source.html#l00211">dbus_error_free()</a>, <a class="el" href="dbus-errors_8c_source.html#l00188">dbus_error_init()</a>, <a class="el" href="dbus-protocol_8h_source.html#l00357">DBUS_ERROR_NO_MEMORY</a>, <a class="el" href="dbus-protocol_8h_source.html#l00369">DBUS_ERROR_NOT_SUPPORTED</a>, <a class="el" href="dbus-errors_8c_source.html#l00354">dbus_set_error()</a>, <a class="el" href="dbus-errors_8c_source.html#l00243">dbus_set_error_const()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00114">DBusKeyring::directory</a>, <a class="el" href="dbus-macros_8h_source.html#l00042">FALSE</a>, <a class="el" href="dbus-keyring_8c_source.html#l00115">DBusKeyring::filename</a>, <a class="el" href="dbus-keyring_8c_source.html#l00116">DBusKeyring::filename_lock</a>, <a class="el" href="dbus-errors_8h_source.html#l00051">DBusError::message</a>, <a class="el" href="dbus-macros_8h_source.html#l00049">NULL</a>, and <a class="el" href="dbus-macros_8h_source.html#l00039">TRUE</a>.</p>

</div>
</div>
<a id="ga9ef32242338798399ef2eaacea5812a6" name="ga9ef32242338798399ef2eaacea5812a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ef32242338798399ef2eaacea5812a6">&#9670;&#160;</a></span>_dbus_keyring_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> * _dbus_keyring_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> *</td>          <td class="paramname"><span class="paramname"><em>keyring</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increments reference count of the keyring. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyring</td><td>the keyring </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the keyring </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-keyring_8c_source.html#l00663">663</a> of file <a class="el" href="dbus-keyring_8c_source.html">dbus-keyring.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-keyring_8c_source.html#l00113">DBusKeyring::refcount</a>.</p>

</div>
</div>
<a id="gadd42b029d08dc477b6847e91bdcb23ca" name="gadd42b029d08dc477b6847e91bdcb23ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd42b029d08dc477b6847e91bdcb23ca">&#9670;&#160;</a></span>_dbus_keyring_unref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _dbus_keyring_unref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusKeyring.html">DBusKeyring</a> *</td>          <td class="paramname"><span class="paramname"><em>keyring</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decrements refcount and finalizes if it reaches zero. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyring</td><td>the keyring </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dbus-keyring_8c_source.html#l00677">677</a> of file <a class="el" href="dbus-keyring_8c_source.html">dbus-keyring.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-credentials_8c_source.html#l00130">_dbus_credentials_unref()</a>, <a class="el" href="dbus-string_8c_source.html#l00259">_dbus_string_free()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00119">DBusKeyring::credentials</a>, <a class="el" href="dbus-memory_8c_source.html#l00702">dbus_free()</a>, <a class="el" href="dbus-keyring_8c_source.html#l00114">DBusKeyring::directory</a>, <a class="el" href="dbus-keyring_8c_source.html#l00115">DBusKeyring::filename</a>, <a class="el" href="dbus-keyring_8c_source.html#l00116">DBusKeyring::filename_lock</a>, <a class="el" href="dbus-keyring_8c_source.html#l00117">DBusKeyring::keys</a>, <a class="el" href="dbus-keyring_8c_source.html#l00118">DBusKeyring::n_keys</a>, and <a class="el" href="dbus-keyring_8c_source.html#l00113">DBusKeyring::refcount</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-auth_8c_source.html#l02383">_dbus_auth_unref()</a>, and <a class="el" href="dbus-keyring_8c_source.html#l00705">_dbus_keyring_new_for_credentials()</a>.</p>

</div>
</div>
<a id="ga5bbeeef1ba831a89d7f0f211e886e7c2" name="ga5bbeeef1ba831a89d7f0f211e886e7c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5bbeeef1ba831a89d7f0f211e886e7c2">&#9670;&#160;</a></span>_dbus_keyring_validate_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a> _dbus_keyring_validate_context </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDBusString.html">DBusString</a> *</td>          <td class="paramname"><span class="paramname"><em>context</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the context is a valid context. </p>
<p>Contexts that might cause confusion when used in filenames are not allowed (contexts can't start with a dot or contain dir separators).</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000013">Todo</a></b></dt><dd>this is the most inefficient implementation imaginable.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>the context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a> if valid </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-keyring_8c_source.html#l00849">849</a> of file <a class="el" href="dbus-keyring_8c_source.html">dbus-keyring.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-string_8c_source.html#l01604">_dbus_string_find()</a>, <a class="el" href="dbus-string_8c_source.html#l01765">_dbus_string_find_blank()</a>, <a class="el" href="dbus-string_8c_source.html#l02450">_dbus_string_validate_ascii()</a>, <a class="el" href="dbus-macros_8h_source.html#l00042">FALSE</a>, <a class="el" href="dbus-macros_8h_source.html#l00049">NULL</a>, and <a class="el" href="dbus-macros_8h_source.html#l00039">TRUE</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-keyring_8c_source.html#l00705">_dbus_keyring_new_for_credentials()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
