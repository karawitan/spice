<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>D-Bus: DBusServer implementations for SOCKET</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">D-Bus<span id="projectnumber">&#160;1.12.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">DBusServer implementations for SOCKET <div class="ingroups"><a class="el" href="group__DBusInternals.html">D-Bus secret internal implementation details</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Implementation details of <a class="el" href="structDBusServer.html" title="Internals of DBusServer object.">DBusServer</a> on SOCKET.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:DBusServerSocket" id="r_DBusServerSocket"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDBusServerSocket.html">DBusServerSocket</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation details of <a class="el" href="structDBusServerSocket.html" title="Implementation details of DBusServerSocket.">DBusServerSocket</a>.  <a href="structDBusServerSocket.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gace7aafbe2ae3cdbfbce3b01972dde0ce" id="r_gace7aafbe2ae3cdbfbce3b01972dde0ce"><td class="memItemLeft" align="right" valign="top">typedef struct DBusServerSocket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gace7aafbe2ae3cdbfbce3b01972dde0ce">DBusServerSocket</a></td></tr>
<tr class="memdesc:gace7aafbe2ae3cdbfbce3b01972dde0ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque object representing a Socket server implementation.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7d4e0a7e1dc583a3f271313ec5e7c12f" id="r_ga7d4e0a7e1dc583a3f271313ec5e7c12f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDBusServer.html">DBusServer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7d4e0a7e1dc583a3f271313ec5e7c12f">_dbus_server_new_for_socket</a> (<a class="el" href="structDBusSocket.html">DBusSocket</a> *fds, int n_fds, const <a class="el" href="structDBusString.html">DBusString</a> *address, <a class="el" href="structDBusNonceFile.html">DBusNonceFile</a> *noncefile, <a class="el" href="structDBusError.html">DBusError</a> *error)</td></tr>
<tr class="memdesc:ga7d4e0a7e1dc583a3f271313ec5e7c12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new server listening on the given file descriptor.  <br /></td></tr>
<tr class="memitem:ga79594da1dd98e77df1771f13eaab3605" id="r_ga79594da1dd98e77df1771f13eaab3605"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDBusServer.html">DBusServer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga79594da1dd98e77df1771f13eaab3605">_dbus_server_new_for_tcp_socket</a> (const char *host, const char *bind, const char *port, const char *family, <a class="el" href="structDBusError.html">DBusError</a> *error, <a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a> use_nonce)</td></tr>
<tr class="memdesc:ga79594da1dd98e77df1771f13eaab3605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new server listening on TCP.  <br /></td></tr>
<tr class="memitem:ga90a89943c15760592e5ddce31bf0e021" id="r_ga90a89943c15760592e5ddce31bf0e021"><td class="memItemLeft" align="right" valign="top">DBusServerListenResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga90a89943c15760592e5ddce31bf0e021">_dbus_server_listen_socket</a> (<a class="el" href="structDBusAddressEntry.html">DBusAddressEntry</a> *entry, <a class="el" href="structDBusServer.html">DBusServer</a> **server_p, <a class="el" href="structDBusError.html">DBusError</a> *error)</td></tr>
<tr class="memdesc:ga90a89943c15760592e5ddce31bf0e021"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to interpret the address entry for various socket-related addresses (well, currently only tcp and nonce-tcp).  <br /></td></tr>
<tr class="memitem:gaa9518c980672f1b8dba8f5a981b93fd9" id="r_gaa9518c980672f1b8dba8f5a981b93fd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa9518c980672f1b8dba8f5a981b93fd9">_dbus_server_socket_own_filename</a> (<a class="el" href="structDBusServer.html">DBusServer</a> *server, char *filename)</td></tr>
<tr class="memdesc:gaa9518c980672f1b8dba8f5a981b93fd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a bad hack since it's really unix domain socket specific.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Implementation details of <a class="el" href="structDBusServer.html" title="Internals of DBusServer object.">DBusServer</a> on SOCKET. </p>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="gace7aafbe2ae3cdbfbce3b01972dde0ce" name="gace7aafbe2ae3cdbfbce3b01972dde0ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace7aafbe2ae3cdbfbce3b01972dde0ce">&#9670;&#160;</a></span>DBusServerSocket</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct DBusServerSocket DBusServerSocket</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opaque object representing a Socket server implementation. </p>

<p class="definition">Definition at line <a class="el" href="dbus-server-socket_8c_source.html#l00044">44</a> of file <a class="el" href="dbus-server-socket_8c_source.html">dbus-server-socket.c</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga90a89943c15760592e5ddce31bf0e021" name="ga90a89943c15760592e5ddce31bf0e021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga90a89943c15760592e5ddce31bf0e021">&#9670;&#160;</a></span>_dbus_server_listen_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DBusServerListenResult _dbus_server_listen_socket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusAddressEntry.html">DBusAddressEntry</a> *</td>          <td class="paramname"><span class="paramname"><em>entry</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusServer.html">DBusServer</a> **</td>          <td class="paramname"><span class="paramname"><em>server_p</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to interpret the address entry for various socket-related addresses (well, currently only tcp and nonce-tcp). </p>
<p>Sets error if the result is not OK.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>an address entry </td></tr>
    <tr><td class="paramname">server_p</td><td>a new <a class="el" href="structDBusServer.html" title="Internals of DBusServer object.">DBusServer</a>, or <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> on failure. </td></tr>
    <tr><td class="paramname">error</td><td>location to store rationale for failure on bad address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the outcome </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-server-socket_8c_source.html#l00554">554</a> of file <a class="el" href="dbus-server-socket_8c_source.html">dbus-server-socket.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-server-socket_8c_source.html#l00417">_dbus_server_new_for_tcp_socket()</a>, <a class="el" href="dbus-address_8c_source.html#l00227">dbus_address_entry_get_method()</a>, <a class="el" href="dbus-address_8c_source.html#l00244">dbus_address_entry_get_value()</a>, <a class="el" href="dbus-macros_8h_source.html#l00042">FALSE</a>, <a class="el" href="dbus-macros_8h_source.html#l00049">NULL</a>, and <a class="el" href="dbus-macros_8h_source.html#l00039">TRUE</a>.</p>

</div>
</div>
<a id="ga7d4e0a7e1dc583a3f271313ec5e7c12f" name="ga7d4e0a7e1dc583a3f271313ec5e7c12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d4e0a7e1dc583a3f271313ec5e7c12f">&#9670;&#160;</a></span>_dbus_server_new_for_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDBusServer.html">DBusServer</a> * _dbus_server_new_for_socket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusSocket.html">DBusSocket</a> *</td>          <td class="paramname"><span class="paramname"><em>fds</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>n_fds</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structDBusString.html">DBusString</a> *</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusNonceFile.html">DBusNonceFile</a> *</td>          <td class="paramname"><span class="paramname"><em>noncefile</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new server listening on the given file descriptor. </p>
<p>The file descriptor should be nonblocking (use _dbus_set_fd_nonblocking() to make it so). The file descriptor should be listening for connections, that is, listen() should have been successfully invoked on it. The server will use accept() to accept new client connections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fds</td><td>list of file descriptors. </td></tr>
    <tr><td class="paramname">n_fds</td><td>number of file descriptors </td></tr>
    <tr><td class="paramname">address</td><td>the server's address </td></tr>
    <tr><td class="paramname">noncefile</td><td>to be used for authentication (NULL if not needed) </td></tr>
    <tr><td class="paramname">error</td><td>location to store reason for failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new server, or <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> on OOM or other error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-server-socket_8c_source.html#l00288">288</a> of file <a class="el" href="dbus-server-socket_8c_source.html">dbus-server-socket.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-server_8c_source.html#l00296">_dbus_server_add_watch()</a>, <a class="el" href="dbus-server_8c_source.html#l00201">_dbus_server_finalize_base()</a>, <a class="el" href="dbus-server_8c_source.html#l00112">_dbus_server_init_base()</a>, <a class="el" href="dbus-watch_8c_source.html#l00169">_dbus_watch_invalidate()</a>, <a class="el" href="dbus-watch_8c_source.html#l00088">_dbus_watch_new()</a>, <a class="el" href="dbus-watch_8c_source.html#l00138">_dbus_watch_unref()</a>, <a class="el" href="dbus-server-socket_8c_source.html#l00052">DBusServerSocket::base</a>, <a class="el" href="dbus-errors_8c_source.html#l00329">dbus_error_is_set()</a>, <a class="el" href="dbus-memory_8c_source.html#l00702">dbus_free()</a>, <a class="el" href="dbus-memory_8h_source.html#l00058">dbus_new</a>, <a class="el" href="dbus-memory_8h_source.html#l00059">dbus_new0</a>, <a class="el" href="dbus-connection_8h_source.html#l00061">DBUS_WATCH_READABLE</a>, <a class="el" href="dbus-server-socket_8c_source.html#l00054">DBusServerSocket::fds</a>, <a class="el" href="dbus-server-socket_8c_source.html#l00053">DBusServerSocket::n_fds</a>, <a class="el" href="dbus-server-socket_8c_source.html#l00057">DBusServerSocket::noncefile</a>, <a class="el" href="dbus-macros_8h_source.html#l00049">NULL</a>, <a class="el" href="dbus-macros_8h_source.html#l00039">TRUE</a>, and <a class="el" href="dbus-server-socket_8c_source.html#l00055">DBusServerSocket::watch</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-server-unix_8c_source.html#l00054">_dbus_server_listen_platform_specific()</a>, <a class="el" href="dbus-server-unix_8c_source.html#l00309">_dbus_server_new_for_domain_socket()</a>, <a class="el" href="dbus-server-launchd_8c_source.html#l00066">_dbus_server_new_for_launchd()</a>, and <a class="el" href="dbus-server-socket_8c_source.html#l00417">_dbus_server_new_for_tcp_socket()</a>.</p>

</div>
</div>
<a id="ga79594da1dd98e77df1771f13eaab3605" name="ga79594da1dd98e77df1771f13eaab3605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79594da1dd98e77df1771f13eaab3605">&#9670;&#160;</a></span>_dbus_server_new_for_tcp_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDBusServer.html">DBusServer</a> * _dbus_server_new_for_tcp_socket </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>host</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>bind</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>family</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDBusError.html">DBusError</a> *</td>          <td class="paramname"><span class="paramname"><em>error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__DBusTypes.html#ga745f4088f630d3d4baf42b08aa9b6653">dbus_bool_t</a></td>          <td class="paramname"><span class="paramname"><em>use_nonce</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new server listening on TCP. </p>
<p>If host is NULL, it will default to localhost. If bind is NULL, it will default to the value for the host parameter, and if that is NULL, then localhost If bind is a hostname, it will be resolved and will listen on all returned addresses. If family is NULL, hostname resolution will try all address families, otherwise it can be ipv4 or ipv6 to restrict the addresses considered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">host</td><td>the hostname to report for the listen address </td></tr>
    <tr><td class="paramname">bind</td><td>the hostname to listen on </td></tr>
    <tr><td class="paramname">port</td><td>the port to listen on or 0 to let the OS choose </td></tr>
    <tr><td class="paramname">family</td><td></td></tr>
    <tr><td class="paramname">error</td><td>location to store reason for failure. </td></tr>
    <tr><td class="paramname">use_nonce</td><td>whether to use a nonce for low-level authentication (nonce-tcp transport) or not (tcp transport) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new server, or <a class="el" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="dbus-server-socket_8c_source.html#l00417">417</a> of file <a class="el" href="dbus-server-socket_8c_source.html">dbus-server-socket.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-address_8c_source.html#l00104">_dbus_address_append_escaped()</a>, <a class="el" href="dbus-sysdeps-unix_8c_source.html#l00286">_dbus_close_socket()</a>, <a class="el" href="dbus-sysdeps-unix_8c_source.html#l01462">_dbus_listen_tcp_socket()</a>, <a class="el" href="dbus-server-socket_8c_source.html#l00288">_dbus_server_new_for_socket()</a>, <a class="el" href="dbus-string_8c_source.html#l00935">_dbus_string_append()</a>, <a class="el" href="dbus-string_8c_source.html#l00259">_dbus_string_free()</a>, <a class="el" href="dbus-string_8c_source.html#l00175">_dbus_string_init()</a>, <a class="el" href="dbus-string_8c_source.html#l00190">_dbus_string_init_const()</a>, <a class="el" href="dbus-protocol_8h_source.html#l00357">DBUS_ERROR_NO_MEMORY</a>, <a class="el" href="dbus-memory_8c_source.html#l00702">dbus_free()</a>, <a class="el" href="dbus-memory_8h_source.html#l00059">dbus_new0</a>, <a class="el" href="dbus-errors_8c_source.html#l00354">dbus_set_error()</a>, and <a class="el" href="dbus-macros_8h_source.html#l00049">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-server-win_8c_source.html#l00050">_dbus_server_listen_platform_specific()</a>, and <a class="el" href="dbus-server-socket_8c_source.html#l00554">_dbus_server_listen_socket()</a>.</p>

</div>
</div>
<a id="gaa9518c980672f1b8dba8f5a981b93fd9" name="gaa9518c980672f1b8dba8f5a981b93fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9518c980672f1b8dba8f5a981b93fd9">&#9670;&#160;</a></span>_dbus_server_socket_own_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _dbus_server_socket_own_filename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDBusServer.html">DBusServer</a> *</td>          <td class="paramname"><span class="paramname"><em>server</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>filename</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a bad hack since it's really unix domain socket specific. </p>
<p>Also, the function weirdly adopts ownership of the passed-in string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>a socket server </td></tr>
    <tr><td class="paramname">filename</td><td>socket filename to report/delete </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dbus-server-socket_8c_source.html#l00607">607</a> of file <a class="el" href="dbus-server-socket_8c_source.html">dbus-server-socket.c</a>.</p>

<p class="reference">References <a class="el" href="dbus-server-socket_8c_source.html#l00056">DBusServerSocket::socket_name</a>.</p>

<p class="reference">Referenced by <a class="el" href="dbus-server-unix_8c_source.html#l00309">_dbus_server_new_for_domain_socket()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
