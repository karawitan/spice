<?xml version="1.0" standalone="no"?><!--*- mode: nxml -*-->
<!DOCTYPE moduleset SYSTEM "moduleset.dtd">
<?xml-stylesheet type="text/xsl" href="moduleset.xsl"?>
<moduleset>


<include href="gtk-osx-bootstrap.modules" />

<!-- Meson build system is installed via pip -->

<repository type="git" name="git.freedesktop.org"
    href="git://anongit.freedesktop.org/"/>

  <repository type="git" name="spice.git"
      href="git://anongit.freedesktop.org/git/spice"/>

  <repository type="tarball" name="spice"
      href="http://spice-space.org/download/"/>

  <repository type="tarball" name="virt-tools"
      href="http://virt-manager.org/download/sources/"/>

  <repository type="git" name="qemu"
      href="git://git.qemu.org"/>

  <repository type="git" name="libvirt.org"
      href="git://libvirt.org/"/>

  <repository type="git" name="git.fedorahosted.org"
      href="git://git.fedorahosted.org/git/"/>

  <repository type="tarball" name="sourceforge"
      href="http://downloads.sourceforge.net/project/"/>

  <repository type="tarball" name="xiph"
      href="http://downloads.us.xiph.org/releases/"/>

  <repository type="git" name="git.gnome.org"
      href="git://git.gnome.org/"/>

  <repository type="tarball" name="ftp.gnome.org" 
      href="ftp://ftp.gnome.org/pub/gnome/sources/"/>

  <autotools id="celt">
    <branch module="celt/celt-0.5.1.3.tar.gz" repo="xiph" version="0.5.1.3"
            hash="sha256:fc2e5b68382eb436a38c3104684a6c494df9bde133c139fbba3ddb5d7eaa6a2e"
            md5sum="67e7b5e45db57a6f1f0a6962f5ecb190" size="440772">
      <patch file="http://cgit.freedesktop.org/spice/spice-jhbuild/plain/patches/celt-0.5.1.3-dont-recurse-into-tests.patch?h=osx" strip="1"/>
    </branch>
  </autotools>

  <autotools id="spice-server">
    <branch repo="spice.git" module="spice"/>
    <dependencies>
      <dep package="spice-protocol"/>
      <dep package="celt"/>
      <dep package="libcacard"/>
      <dep package="pyparsing"/>
    </dependencies>
  </autotools>

  <meson id="spice-protocol">
    <branch repo="spice.git"
            module="spice-protocol"
            tag="v0.14.4"
            version="0.14.4"
            hash="sha256:04ffba610d9d1ce5fc508f803c95d2f2b5ac8117915922c2e907bae901a71bfa"
            size="100000" />
    <dependencies>
    </dependencies>
  </meson>

  <!-- qemu isn't a real autotools user, but it provides a configure script
       which is really similar to the one in autotools build systems.
       However clean git checkouts already contain a Makefile, so we can't
       rely on this file to know whether autogen.sh needs to be run or not,
       so we use config.log instead (which isn't present in a clean git
       checkout). The configure script requires an "=" when using 'prefix',
       and doesn't accept libdir nor other unknow arguments so we force
       a specific template to be used -->
  <autotools id="qemu" makefile="config.log" autogen-template="%(srcdir)s/configure --prefix=%(prefix)s --enable-spice --target-list=x86_64-softmmu --enable-smartcard-nss --enable-smartcard" >
    <branch repo="qemu" module="qemu"/>
    <dependencies>
      <dep package="libcacard"/>
      <dep package="spice-server"/>
      <dep package="vd-agent"/>
    </dependencies>
  </autotools>

  <autotools id="slirp">
    <branch repo="spice.git" module="slirp"/>
    <dependencies>
    </dependencies>
  </autotools>

  <autotools id="usbredir" makeinstallargs="LIBDIR=%(libdir) PREFIX=%(prefix) install">
    <branch repo="git.freedesktop.org" module="~jwrdegoede/usbredir"/>
    <dep package="libusb"/>
  </autotools>

  <autotools id="libusb">
    <branch repo="git.freedesktop.org" module="~jwrdegoede/libusb"/>
  </autotools>

  <autotools id="libcacard" makefile="config.log" autogen-template="%(srcdir)s/configure --prefix=%(prefix)s --target-list=x86_64-softmmu" makeargs="libcacard.la" makeinstallargs="install-libcacard">
    <branch repo="qemu" module="qemu"/>
  </autotools>


  <meson id="spice-gtk">
    <branch repo="spice.git"
            module="spice-gtk"
            checkoutdir="spice-gtk-0.42"
            tag="v0.42">
      <dependencies>
        <dep package="python3"/>
        <dep package="spice-protocol"/>
        <dep package="celt"/>
        <dep package="pyparsing"/>
        <dep package="gst-plugins-good"/>
        <dep package="gtk+"/>
      </dependencies>
    </branch>
  </meson>

  <meson id="spice-gtk3">
    <branch repo="spice.git"
            module="spice-gtk"
            checkoutdir="spice-gtk3-0.42"
            tag="v0.42">
      <dependencies>
        <dep package="python3"/>
        <dep package="spice-protocol"/>
        <dep package="celt"/>
        <dep package="pyparsing"/>
        <dep package="gst-plugins-good"/>
        <dep package="gtk+"/>
      </dependencies>
    </branch>
  </meson>

  <autotools id="vd-agent">
    <branch repo="spice.git" module="linux/vd_agent"/>
    <dependencies>
      <dep package="spice-protocol"/>
    </dependencies>
  </autotools>

  <autotools id="qxl">
    <branch repo="spice.git" module="xorg/driver/xf86-video-qxl"/>
    <dependencies>
      <dep package="spice-protocol"/>
    </dependencies>
  </autotools>

  <autotools id="xspice">
    <branch repo="git.freedesktop.org" module="~alon/xspice"/>
    <dependencies>
      <dep package="spice-protocol"/>
      <dep package="spice-server"/>
    </dependencies>
  </autotools>

  <autotools id="win32-vd-agent">
    <branch repo="spice.git" module="win32/vd_agent"/>
    <dependencies>
    </dependencies>
  </autotools>

  <autotools id="win32-qxl">
    <branch repo="spice.git" module="win32/qxl"/>
    <dependencies>
    </dependencies>
  </autotools>

  <autotools id="libvirt">
    <branch repo="libvirt.org" module="libvirt.git"/>
    <dependencies>
    </dependencies>
  </autotools>

  <autotools id="libvirt-glib" >
    <branch repo="libvirt.org" module="libvirt-glib.git"/>
    <dependencies>
      <dep package="libvirt"/>
    </dependencies>
  </autotools>

  <autotools id="boxes">
    <branch repo="git.gnome.org" module="gnome-boxes"/>
    <dependencies>
      <dep package="gtk-vnc"/>
      <dep package="libosinfo"/>
      <dep package="libvirt-glib"/>
      <dep package="spice-gtk"/>
    </dependencies>
  </autotools>

  <autotools id="virt-manager" makeinstallargs="-C build install" makeargs="-C build" >
    <branch repo="git.fedorahosted.org" module="virt-manager.git"/>
    <dependencies>
      <dep package="libvirt"/>
      <dep package="virtinst"/>
    </dependencies>
  </autotools>

  <distutils id="virtinst">
    <branch repo="git.fedorahosted.org" module="python-virtinst.git"/>
    <dependencies>
      <dep package="virt-viewer"/>
    </dependencies>
  </distutils>

  <autotools id="virt-viewer" >
    <branch repo="virt-tools"
            module="virt-viewer/virt-viewer-0.5.7.tar.gz"
            version="0.5.7"
            hash="sha256:4af5e660b3d15bcd3727851af1ddc2f08805c50ad4fc30714e21b20113fe9a83"
            size="676213" />
    <dependencies>
      <dep package="spice-gtk"/>
    </dependencies>
  </autotools>

  <autotools id="virt-viewer-gtk3" >
    <branch repo="virt-tools"
            module="virt-viewer/virt-viewer-0.5.7.tar.gz"
            version="0.5.7"
            hash="sha256:4af5e660b3d15bcd3727851af1ddc2f08805c50ad4fc30714e21b20113fe9a83"
            size="676213" />
    <dependencies>
      <dep package="spice-gtk3"/>
    </dependencies>
  </autotools>

  <autotools id="libosinfo">
    <branch repo="git.fedorahosted.org" module="libosinfo.git"/>
  </autotools>

  <autotools id="gtk-vnc" >
    <branch repo="git.gnome.org" module="gtk-vnc.git"/>
  </autotools>

  <autotools id="vinagre" >
    <branch repo="git.gnome.org" module="vinagre.git"/>
    <dependencies>
      <dep package="spice-gtk"/>
    </dependencies>
  </autotools>

  <autotools id="gettext">
    <branch repo="ftp.gnome.org" module="gettext/0.22/gettext-0.22.5.tar.xz" version="0.22.5" />
    <dependencies>
      <dep package="libiconv" />
    </dependencies>
  </autotools>

</moduleset>
