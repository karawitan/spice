# how to use this file?
#
# mkdir -p $HOME/spice
# git clone git://anongit.freedesktop.org/git/xorg/util/modular/ $HOME/xorg/util/modular
# git clone git://people.freedesktop.org/~teuf/spice-jhbuild ~/spice/spice-jhbuild
# jhbuild -f $HOME/spice/spice-jhbuild/jhbuildrc
#
# Source tree will be in $HOME/spice/
# Binaries will be in $HOME/spice-usr
#

use_local_modulesets = True
skip = ["python"]

moduleset = os.path.join(os.environ['HOME'],'spice','spice-jhbuild','modulesets','spice.xml')

autogenargs = '--disable-usbredir --with-gtk=3.0 --with-audio=gstreamer --with-gtk=3.0 --disable-smartcard --disable-vala --enable-controller --with-coroutine=gthread --disable-wayland-egl-platform --disable-wayland-egl-server --enable-glx --disable-xlib --disable-cogl-gst --enable-gl'

modules = [
    'glib',
    'gstreamer',
    'cogl',
    'spice-gtk',
    'qemu'
]

os.environ['CFLAGS'] = '-Wno-int-conversion -Wno-incompatible-function-pointer-types -Wno-pointer-sign -DX11=0'

# Additional flags for make can be specified here
# Set makeargs to'V=1' for verbose build output.
makeargs = '-j4 CFLAGS="-Wno-int-conversion -Wno-incompatible-function-pointer-types -Wno-pointer-sign"'
