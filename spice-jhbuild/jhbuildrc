# how to use this file?
#
# mkdir -p $HOME/spice
# git clone git://anongit.freedesktop.org/git/xorg/util/modular/ $HOME/xorg/util/modular
# git clone git://people.freedesktop.org/~teuf/spice-jhbuild ~/spice/spice-jhbuild
# jhbuild -f $HOME/spice/spice-jhbuild/jhbuildrc
#
# Source tree will be in $HOME/spice/
# Binaries will be in $HOME/spice-usr
#

use_local_modulesets = True
# Skip packages that are already provided by the system or Homebrew
skip = ["python", "intltool", "glib", "gstreamer", "cogl"]

# Use system pkg-config paths
os.environ['PKG_CONFIG_PATH'] = '/opt/homebrew/lib/pkgconfig:/opt/homebrew/share/pkgconfig:/usr/local/lib/pkgconfig:/usr/local/share/pkgconfig:/usr/lib/pkgconfig'

moduleset = os.path.join(os.environ['HOME'],'spice','spice-jhbuild','modulesets','spice.xml')

modules = [
    'spice-gtk'
]

os.environ['CFLAGS'] = '-Wno-int-conversion -Wno-incompatible-function-pointer-types -Wno-pointer-sign -DX11=0'

# Additional flags for make can be specified here
# Set makeargs to'V=1' for verbose build output.
makeargs = '-j4 CFLAGS="-Wno-int-conversion -Wno-incompatible-function-pointer-types -Wno-pointer-sign"'
